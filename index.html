<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=750, target-densitydpi=device-dpi, user-scalable=0">
	<title>新的一年</title>
	<style>
		*{margin:0;padding:0;list-style: none;-webkit-box-sizing: border-box;box-sizing: border-box;}
		html,body,.canvasbox{width:100%;height:100%;overflow:hidden;position: absolute;top:0;
			left:0;z-index: 9;}
		/* .loveCanvas{width:100%;height:100%;position: absolute;top:0;left:0;background:url('images/mess.png') no-repeat center center / 120% auto;background-color:#000;} */
		.loveCanvas{width:100%;height:100%;position: absolute;top:0;left:0;background-color:#000;}
		canvas{width:100%;height:100%;}
		#loading{width:100%;height:100%;background:#000;z-index: 9999;position:absolute;}
		#music{width:0;height:0;position:absolute;top:-9999px;left:-9999px;opacity: 0;display: none;}
		.number{width:100px;height:30px;color:#fff;position:absolute;left:0;top:0;z-index: 9999;font-size:28px;}
		.press{width:400px;height:100px;position: absolute;top:0;left:0;right:0;bottom:0;margin:auto;transform:translateY(-80px);-webkit-transform:translateY(-80px);}
		.pressnum{display:block;font-size:24px;color:#fff;text-align:center;line-height:50px;}
		.press-box{width:100%;padding:3px;height:10px;background:#fff;margin-top:20px;border-radius:10px;}
		.press-press{display:block;width:0;height:100%;background:#000;border-radius:6px;}
		.start{display:none;width:300px;height:50px;position: absolute;
			right:40px;bottom:30px;margin:auto;text-align:right;font-size:24px;color:#fff;}
	</style>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
	        function audioAutoPlay() {
	            var video = document.querySelector("#music_01");
	            var video1 = document.querySelector("#music_02");
	            video.play();
	            video1.play();
	            video.pause();
	            video1.pause();
	            document.addEventListener("WeixinJSBridgeReady", function () {
	                video.play();
	                video1.play();
	                video.pause();
	                video1.pause();
	            }, false);
	        }
	        audioAutoPlay(); 
		});
	</script>
</head>
<body>
	<div id="loading">
		<div class="press">
			<span class="pressnum">0%</span>
			<div class="press-box">
				<span class="press-press"></span>
			</div>
		</div>
		<div class="start">~随便点一下屏幕^_^</div>
	</div>
	<div id="music">
		<audio src="music/music_01.mp3" loop="true" id="music_01"></audio>
		<audio src="music/music_02.mp3" loop="true" id="music_02"></audio>
	</div>
	<div class="loveCanvas"></div>
	<script src="https://cdn.bootcss.com/jquery/3.3.0/jquery.min.js"></script>
	<script src="js/hilo-standalone.js"></script>
	<script src="js/Animate.js"></script>
	<script src="js/Scroller.js"></script>
	<script>
		var startfalg = false;
		window.onload = function(){
			game.init();
		}
		$('#loading').click(function(){
			if(startfalg){
				$('#loading').hide();
				music_01.play();
				game.addSnow();
			}
		})
		var _width = 750,
			_height = window.innerHeight,
			canvas = document.getElementsByClassName('loveCanvas')[0],
			music_01 = document.getElementById('music_01'),
			music_02 = document.getElementById('music_02'),
			p_cango = false,
        	m_cango = false;
		var musicArr = [
			{
				dom: music_01,
				timer: [0,9200]
			},
			{
				dom: music_02,
				timer: [9200, 11000]
			}
		];
		var stageList = [
			{
				id:"lines",
				type: "Container",
	            propes: {
	                width: 20,
	                height: 220,
	                x: (750-20)/2,
	                y: _height-220-100,
	                pivotX: 0,
	                pivotY: 0
	            },
	            delay: "l0",
	            animations: [{
	                prope: "y",
	                time: [0, 0, 780, 2e5],
	                value: [_height-220-100, _height-220-200]
	            },{
	                prope: "alpha",
	                time: [0, 0, 780, 2e5],
	                value: [1, 0]
	            }]
			},
			{
	            id: "lines_bg",
	            type: "Bitmap",
	            image: "lines",
	            parent: "lines",
	            propes: {
	            	rect: [2, 0, 1, 220],
	            	x: 10,
               		y: 0
	            },
	            animations: []
	        },
	        {
	            id: "lines_cir",
	            type: "Bitmap",
	            image: "lines",
	            parent: "lines",
	            propes: {
	            	rect: [4, 70, 15, 15],
	            	x: 5,
               		y: 200
	            },
	            animations: []
	        },
	        // 机械心脏
	         {
				id:"myheart",
				type: "Container",
	            propes: {
	                width: 700,
	                height: 619,
	                x:50/2,
	                y:(_height-619)/2,
	                alpha: 0.7
	            },
	            delay: "l0",
	            animations: []
			},
			{
	            id: "heart1",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 169,
               		y: 113,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 1000]
	            }]
	        },
	        {
	            id: "heart2",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [800, 0, 200, 200],
	            	x: 34,
               		y: 133,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -500]
	            }]
	        },
	        {
	            id: "heart3",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 57,
               		y: 217,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.8,
	                scaleY:0.8
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 1000]
	            }]
	        },
	        {
	            id: "heart4",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 470,
               		y: 104,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.85,
	                scaleY:0.85
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -500]
	            }]
	        },
	        {
	            id: "heart5",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [800, 0, 200, 200],
	            	x: 580,
               		y: 58,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 500]
	            }]
	        },
	        {
	            id: "heart6",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 613,
               		y: 156,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:1,
	                scaleY:1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 500]
	            }]
	        },
	        {
	            id: "heart7",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 402,
               		y: 197,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -500]
	            }]
	        },
	        {
	            id: "heart8",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [800, 0, 200, 200],
	            	x: 408,
               		y: 275,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -2000]
	            }]
	        },
	        {
	            id: "heart9",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 566,
               		y: 310,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:1,
	                scaleY:1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 1000]
	            }]
	        },
	        {
	            id: "heart10",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 449,
               		y: 359,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart11",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 291,
               		y: 445,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.7,
	                scaleY:0.7
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 600]
	            }]
	        },
	        {
	            id: "heart12",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 419,
               		y: 465,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -800]
	            }]
	        },
	        {
	            id: "heart13",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 192,
               		y: 408,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 1000]
	            }]
	        },
	        {
	            id: "heart14",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 192,
               		y: 408,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart15",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 368,
               		y: 538,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 900]
	            }]
	        },
	        {
	            id: "heart16",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 304,
               		y: 540,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart17",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [800, 0, 200, 200],
	            	x: 348,
               		y: 595,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 1500]
	            }]
	        },
	        {
	            id: "heart18",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 270,
               		y: 181,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:1,
	                scaleY:1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -100]
	            }]
	        },
	        {
	            id: "heart19",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 441,
               		y: 189,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.8,
	                scaleY:0.8
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 200]
	            }]
	        },
	        {
	            id: "heart20",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 441,
               		y: 189,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.8,
	                scaleY:0.8
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -300]
	            }]
	        },
	        {
	            id: "heart21",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 202,
               		y: 271,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 400]
	            }]
	        },
	        {
	            id: "heart22",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 607,
               		y: 27,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -800]
	            }]
	        },
	        {
	            id: "heart23",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 482,
               		y: 379,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, 1000]
	            }]
	        },
	        {
	            id: "heart24",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 548,
               		y: 391,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart25",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 459,
               		y: 301,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -2000]
	            }]
	        },
	        {
	            id: "heart26",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 459,
               		y: 301,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -800]
	            }]
	        },
	        {
	            id: "heart27",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 361,
               		y: 376,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:1,
	                scaleY:1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart28",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [800, 0, 200, 200],
	            	x: 312,
               		y: 404,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart29",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 150,
               		y: 370,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart30",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 131,
               		y: 335,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart31",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart32",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 482,
               		y: 438,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart33",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 289,
               		y: 243,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart34",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 139,
               		y: 205,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart35",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 82,
               		y: 237,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart36",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 117,
               		y: 287,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart37",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 483,
               		y: 381,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart38",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 482,
               		y: 437,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.4,
	                scaleY:0.4
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart39",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 517,
               		y: 410,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart40",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 240,
               		y: 401,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart41",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 60,
               		y: 83,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart42",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 220,
               		y: 323,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:1,
	                scaleY:1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart42",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 555,
               		y: 232,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.6,
	                scaleY:0.6
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart43",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 603,
               		y: 279,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart44",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 538,
               		y: 100,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart45",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart46",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart47",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart48",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart49",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart50",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart51",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart52",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 418,
               		y: 467,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart53",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 482,
               		y: 438,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.25,
	                scaleY:0.25
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart54",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 289,
               		y: 243,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart56",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 139,
               		y: 205,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart57",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 82,
               		y: 237,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart58",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 117,
               		y: 287,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart59",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 483,
               		y: 381,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.25,
	                scaleY:0.25
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart60",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 482,
               		y: 437,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart61",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 517,
               		y: 410,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.25,
	                scaleY:0.25
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart62",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 240,
               		y: 401,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart63",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [400, 0, 200, 200],
	            	x: 60,
               		y: 83,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.1,
	                scaleY:0.1
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart64",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [0, 0, 200, 200],
	            	x: 220,
               		y: 323,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.5,
	                scaleY:0.5
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart65",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [200, 0, 200, 200],
	            	x: 555,
               		y: 232,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.3,
	                scaleY:0.3
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart66",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 603,
               		y: 279,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "heart67",
	            type: "Bitmap",
	            image: "heartjixie",
	            delay: "l0",
	            parent:'myheart',
	            propes: {
	            	rect: [600, 0, 200, 200],
	            	x: 538,
               		y: 100,
               		alpha: 1,
               		pivotX: 100,
	                pivotY: 100,
	                scaleX:0.2,
	                scaleY:0.2
	            },
	            animations: [{
	                prope: "rotation",
	                time: [0, 0, 10000+_height, 10000+_height],
	                value: [0, -1000]
	            }]
	        },
	        {
	            id: "img_01",
	            type: "Bitmap",
	            image: "img_01",
	            delay: "l0",
	            propes: {
	            	rect: [0, 0, 500, 500],
	            	x: 250/2,
               		y: (_height-500)/2,
               		alpha: 0.9
	            },
	            animations: [{
	                prope: "y",
	                time: [0, 0, 3000, 2e5],
	                value: [(_height-500)/2, -500]
	            },{
	                prope: "alpha",
	                time: [0, 0, 3000, 2e5],
	                value: [0.9, 0]
	            }]
	        },
	        {
	            id: "img_02",
	            type: "Bitmap",
	            image: "img_02",
	            delay: "l0",
	            propes: {
	            	rect: [0, 0, 500, 667],
	            	x: 250/2,
               		y: _height,
               		alpha: 0.9
	            },
	            animations: [{
	                prope: "y",
	                time: [0, 2000, 5000, 2e5],
	                value: [_height, -667]
	            },{
	                prope: "alpha",
	                time: [0, 2000, 3500, 5000, 2e5],
	                value: [0, 0.9, 0]
	            }]
	        },
	        {
	            id: "img_03",
	            type: "Bitmap",
	            image: "img_03",
	            delay: "l0",
	            propes: {
	            	rect: [0, 0, 500, 667],
	            	x: 250/2,
               		y: _height,
               		alpha: 0.9
	            },
	            animations: [{
	                prope: "y",
	                time: [0, 4000, 7000, 2e5],
	                value: [_height, -667]
	            },{
	                prope: "alpha",
	                time: [0, 4000, 5500, 7000, 2e5],
	                value: [0, 0.9, 0]
	            }]
	        },
	        {
	            id: "img_04",
	            type: "Bitmap",
	            image: "img_04",
	            delay: "l0",
	            propes: {
	            	rect: [0, 0, 500, 667],
	            	x: 250/2+250,
               		y: _height+667/2,
               		alpha: 0.9,
               		pivotX: 250,
	                pivotY: 667/2
	            },
	            animations: [{ 
	                prope: "y",
	                time: [0, 6100, 7500, 2e5],
	                value: [_height+667/2, (_height-667)/2+667/2]
	            },{
	                prope: "alpha",
	                time: [0, 6100, 7500, 9000, 2e5],
	                value: [0, 0.9, 0]
	            },{
	                prope: "scaleX",
	                time: [0, 7500, 9000],
	                value: [1, 10]
	            },{
	                prope: "scaleY",
	                time: [0, 7500, 9000],
	                value: [1, 10]
	            }]
	        },
	        {
	            id: "img_05",
	            type: "Bitmap",
	            image: "cake",
	            delay: "l0",
	            propes: {
	            	rect: [0, 0, 500, 506],
	            	x: (750-500)/2,
               		y: (_height-506)/2,
               		alpha: 0,
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 9000, 10000, 2e5],
	                value: [0, 1]
	            }]
	        },
	        {
	            id: "text_01",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [0, 0, 165, 43],
	            	x: (750-165)/2,
               		y: (_height-500)/2-43*2,
               		alpha: 1
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 0, 200, 2e5],
	                value: [1, 0]
	            }]
	        },
	        {
	            id: "text_02",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [0, 43, 165, 41],
	            	x: (750-165)/2,
               		y: (_height-43)/2,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 1000, 1500, 2000, 2e5],
	                value: [0, 1, 0]
	            },{
	                prope: "y",
	                time: [0, 1500, 2000, 2e5],
	                value: [(_height-43)/2, (_height-43)/2-200]
	            }]
	        },
	        {
	            id: "text_03",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [165, 0, 296, 43],
	            	x: (750-296)/2,
               		y: (_height-43)/2,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 2000, 2500, 3000, 2e5],
	                value: [0, 1, 0]
	            },{
	                prope: "y",
	                time: [0, 2500, 3000, 2e5],
	                value: [(_height-43)/2, (_height-43)/2-200]
	            }]
	        },
	        {
	            id: "text_04",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [165, 43, 211, 39],
	            	x: (750-211)/2,
               		y: (_height-39)/2,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 4000, 4500, 5000, 2e5],
	                value: [0, 1, 0]
	            }]
	        },
	        {
	            id: "text_05",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [460, 0, 167, 43],
	            	x: (750-167)/2,
               		y: (_height-43)/2,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 6100, 6400, 6700, 2e5],
	                value: [0, 1, 0]
	            },{
	                prope: "y",
	                time: [0, 6100, 6700, 2e5],
	                value: [(_height-43)/2, (_height-43)/2-200]
	            }]
	        },
	        {
	            id: "text_06",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [375, 43, 169, 39],
	            	x: (750-169)/2,
               		y: (_height-39)/2,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 6400, 6700, 7000, 2e5],
	                value: [0, 1, 0]
	            },{
	                prope: "y",
	                time: [0, 6400, 7000, 2e5],
	                value: [(_height-39)/2, (_height-39)/2-200]
	            }]
	        },
	        {
	            id: "text_07",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [544, 43, 166, 39],
	            	x: (750-166)/2,
               		y: (_height-39)/2,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 6700, 7000, 7300, 2e5],
	                value: [0, 1, 0]
	            },{
	                prope: "y",
	                time: [0, 6700, 7300, 2e5],
	                value: [(_height-39)/2, (_height-39)/2-200]
	            }]
	        },
	        {
	            id: "text_08",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [628, 0, 120, 43],
	            	x: (750-120)/2,
               		y: (_height-43)/2-400,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 8000, 10000, 2e5],
	                value: [0, 1]
	            }]
	        },
	        {
	            id: "text_09",
	            type: "Bitmap",
	            image: "birthText",
	            delay: "l0",
	            propes: {
	            	rect: [0, 82, 288, 40],
	            	x: (750-288)/2,
               		y: (_height-40)/2-350,
               		alpha: 0
	            },
	            animations: [{
	                prope: "alpha",
	                time: [0, 8500, 10000, 2e5],
	                value: [0, 1]
	            }]
	        },
		];
		var timer = {
			l0: 0,
			l1: 10000,
			l2: 20000,
			l3: 30000,
			l4: 40000,
			l5: 50000,
			l6: 60000
		}
		/* 预加载部分 */
	    var Asset = Hilo.Class.create({
	        Mixes: Hilo.EventMixin,
	        queue: null,
	        load: function(){
	            var resource = [
	           		// {id:'music_01', src: 'music/music_01.mp3'},
	           		// {id:'music_02', src: 'music/music_02.mp3'},
	           		{id:'snow', src: 'images/snow.png'},
	           		{id:'lines', src: 'images/lines.png'},
	           		{id:'heart', src: 'images/heart.png'},
	           		{id:'img_01', src: 'images/img_01.jpg'},
	           		{id:'img_02', src: 'images/img_02.jpg'},
	           		{id:'img_03', src: 'images/img_03.jpg'},
	           		{id:'img_04', src: 'images/img_04.jpg'},
	           		{id:'birthText', src: 'images/birthText.png'},
	           		{id:'cake', src: 'images/cake.png'},
	           		{id:'heartjixie', src: 'images/heartjixie.png'},
	            ];
	            this.queue = new Hilo.LoadQueue();
	            this.queue.add(resource);
	            this.queue.on('complete', this.onComplete.bind(this));

	            this.queue.on('load', function(e){
				    var nums = Math.floor( (this.getLoaded()/resource.length) *100);
				    if(nums >= 90){
				    	nums = 90;
				    }
				    $('.pressnum').text(nums+'%');
            		$('.press-press').css({width: nums+'%'})
				});
				// this.queue.on('error', function(e){
				//     console.log('error:', e.detail);
				// });

	            this.queue.start();
	        },
	        onComplete: function(){
	            console.log('加载完成');
	            this.queue.off('complete');
	            this.fire('complete');
	        }
	    })

	    var game = {
	    	asset: null,
	        stage: null,
	        ticker: null,
	        snow: null,
	        lines: null,
	        cake: null,
	        iscake: false,
	        m:{},
	    	init: function(){
	 			this.asset = new Asset();
	            this.asset.on('complete', function(e){
	               this.asset.off('complete');
	                p_cango = true;
               		if(m_cango){
	               	   $('.pressnum').text('100%');
	            	   $('.press-press').css({width: '100%'});
	            	   $('.start').show();
	            	   startfalg = true;
	               }
	              
	               this.initStage();
	            }.bind(this))
	            this.asset.load();
	    	},
	    	initStage: function(){
	    		console.log('舞台初始化');
	    		this.stage = new Hilo.Stage({                                          
	                renderType: 'canvas',
	                container: canvas,
	                width: 750,
	                height: _height
	            })
	            //启动计时器
	            this.ticker = new Hilo.Ticker(60);
	            this.ticker.addTick(Hilo.Tween);
	            this.ticker.addTick(this.stage);
	            this.ticker.start(true);
	           	
	            for(var i = 0; i < stageList.length; i++){
	                stageList[i].image?stageList[i].propes.image = this.asset.queue.get(stageList[i].image).content:'';
	                stageList[i].frames ? stageList[i].propes.frames =game.m[stageList[i].frames.split(".")[0]].getSprite(stageList[i].frames.split(".")[1]) : "";
	                this.m[stageList[i].id] = new Hilo[stageList[i].type](stageList[i].propes).addTo( (stageList[i].parent)?(game.m[stageList[i].parent]):this.stage);
	                "Graphics" == stageList[i].type && stageList[i].draw.call(game.m[stageList[i].id])
	            }
	            Hilo.Tween.to(this.stage.children[0].children[1], {
	            	y: 0,
	                alpha: 0
	            }, {
	                duration: 1600,
	                delay: 0,
	                loop: !0,
	                // onComplete: function() {
	                //     game.whiteBlock.alpha = 0
	                // }
	            })
	            // 粒子系统
	            var partArr = [];
	            function addpart(x,y){
					var particleSystem = new Hilo.ParticleSystem({
		                x:x,
		                y:y,
		                emitNum:1,
		                emitTime:0.01,
		                totalTime:0.01,
		                particle:{
		                    frame:[
		                        [0, 0, 50, 50]
		                    ],
		                    image:game.asset.queue.get('heart').content,
		                    life:3,
		                    alpha:0.8,
		                    alphaV:-.02,
		                    vxVar:300,
		                    vyVar:300,
		                    axVar:200,
		                    ayVar:200,
		                    scale:.5,
		                    rotationVar:360,
		                    rotationVVar:4,
		                    pivotX:.5,
		                    pivotY:.5
		                }
		            });
		            game.stage.addChild(particleSystem);
		            partArr.push(particleSystem);
		            particleSystem.start();
	            }

	            this.stage.enableDOMEvent(Hilo.event.POINTER_START);
	    		this.stage.enableDOMEvent(Hilo.event.POINTER_MOVE);
	    		this.stage.enableDOMEvent(Hilo.event.POINTER_END);
	            this.stage.onUpdate = this.onUpdate.bind(this);
	            var timers;
	            this.stage.on(Hilo.event.POINTER_START, function(e){
	            	clearTimeout(timers);
	            	var x = e.touches[0].clientX;
	            	var y = e.touches[0].clientY;
	            	addpart(x, y);
	            })
	            this.stage.on(Hilo.event.POINTER_MOVE, function(e){
	            	var x = e.touches[0].clientX;
	            	var y = e.touches[0].clientY;
	            	addpart(x, y);
	            })
	            this.stage.on(Hilo.event.POINTER_END, function(e){
	            	clearTimeout(timers);
	            	timers = setTimeout(function(){
	            		partArr.forEach(function(e){
		            		e.removeFromParent();
		            	})
		            	partArr = [];
	            	}, 1000)
	            })
	    	},
	    	addSnow: function(){
	            // 启动滑动插件
	            scrollinit();
	    		// 添加雪花 
	            game.snow = new Hilo.Container({
	            	width: _width,
	                height: _height,
	                x: 0,
	                y: 0,
	                pivotX: 0,
	                pivotY: 0
	            }).addTo(game.stage);
	            game.cake = new Hilo.Container({
	            	width: _width,
	                height: _height,
	                x: 0,
	                y: 0,
	                pivotX: 0,
	                pivotY: 0,
	                alpha: 0
	            }).addTo(game.stage);
	            for (var i=0; i<50; i++) {
	            	var random = Math.random();
	            	var thisX = Math.floor(random*3);
	            	var thisY = Math.floor(random*4);
	            	var xRandom = Math.random()*750,
	            		yRandom = -Math.random()*_height;
	            	var number = Math.floor(Math.random()*12);
	            	var snows = new Hilo.Bitmap({
	            	 	image:this.asset.queue.get('snow').content,
	            	 	rect: [thisX*100, thisY*100, 100, 100],
		                pivotX: 0,
		                pivotY: 0,
		                x: xRandom,
		                y: yRandom,
		                scaleX: random/1.5,
		                scaleY: random/1.5,
		                alpha:random*0.6,
		                rotation:0
	            	 }).addTo(game.snow)
	            	snows.xV = random*5-2.5;
	            	snows.yV = random*5;
	            	snows.rV = (random-0.5)*2;
	            }
	            for (var i=0; i<50; i++) {
	            	var random = Math.random();
	            	var thisX = Math.floor(random*3);
	            	var thisY = Math.floor(random*4);
	            	var xRandom = Math.random()*750,
	            		yRandom = -Math.random()*_height-50;
	            	var number = Math.floor(Math.random()*12);
	            	var cakes = new Hilo.Bitmap({
	            	 	image:this.asset.queue.get('cake').content,
	            	 	rect: [0, 0, 500, 506],
		                pivotX: 0,
		                pivotY: 0,
		                width: 50,
		                height:50.6,
		                x: xRandom,
		                y: yRandom,
		                rotation:0
	            	 }).addTo(game.cake)
	            	 cakes.yV = random*10;
	            	 cakes.rV = (random-0.5)*2;
	            }
	            // console.log(this.stage)
	    	},
	    	onUpdate: function(){
	    		if(game.snow){
	    			for(var i=0; i<game.snow.children.length; i++){
		    			var _this = game.snow.children[i];
		    			_this.x += _this.xV;
		    			_this.y += _this.yV;
		    			_this.rotation += _this.rV;
		    			if(_this.y > _height){
		    				_this.x = Math.random()*750;
		    				_this.y = -Math.random()*_height;
		    				_this.xV = Math.random()*5-2.5;
		    				_this.rotation = 0;
		    				_this.rV = Math.random()-0.5;
		    				_this.alpha = Math.random()*0.6;
		    			}
		    		}
	    		}
	    		// 蛋糕掉落
	    		if(game.cake){
	    			for(var i=0; i<game.cake.children.length; i++){
		    			var _this = game.cake.children[i];
		    			if(_this.y > _height){
		    				_this.x = Math.random()*750;
		    				_this.rotation = 0;
		    				_this.y = -Math.random()*_height;
		    			} else{
		    				_this.y += _this.yV;
		    				_this.rotation += _this.rV;
		    			}
		    		}
	    		}
	    	}
	    }
	    var  _x = function(e, t, i, n, a) {
	        return e + (t - e) / (n - i) * (a - i)
	    }
	    var scrollinit = function(){
	    	var scroller = new Scroller(function(e, t, i){
	            var n = t;
	            n>9000?game.iscake=true:game.iscake=false;
	            if(n<9000 && game.cake){
	            	Hilo.Tween.to(game.cake, {
		                alpha: 0
		            }, {
		                duration: 300
		            })
		            Hilo.Tween.to(game.snow, {
		                alpha: 1
		            }, {
		                duration: 300
		            })
	            } else if(game.cake) {
	            	Hilo.Tween.to(game.cake, {
		                alpha: 1
		            }, {
		                duration: 300
		            })
		             Hilo.Tween.to(game.snow, {
		                alpha: 0
		            }, {
		                duration: 300
		            })
	            }
	            // $('.number').text(n)
	            for(var i = 0; i < stageList.length; i ++){
	                for(var o = stageList[i], s = o.animations, j = 0; j < s.length; j ++){
	                    if(game.m[o.id]){
	                        var h = s[j];
	                        var d =h.value;
	                        var f = h.time;
	                        var  _ = timer[o.delay ? o.delay : "l1"];
	                        n < f[1] + _ && n > f[0] + _ ? game.m[o.id][h.prope] = d[0] : n < f[f.length - 1] + _ && n > f[f.length - 2] + _ && (game.m[o.id][h.prope] = d[d.length - 1]);
	                        for (var g = 0; g < d.length - 1; g++)
	                            n < f[g + 2] + _ && n > f[g + 1] + _ && (game.m[o.id][h.prope] = _x(d[g], d[g + 1], f[g + 1] + _, f[g + 2] + _, n))
	                    }
	                }
	            }
	            for(var i = 0 ; i < musicArr.length; i++){
	            	for(var m = musicArr[i], b = m.timer, k = 0; k < b.length; k++){
	            		n < b[1] && n >= b[0] ? (m.dom.paused?m.dom.play():'') : (!m.dom.paused?m.dom.pause():'');
	            	}
	            }
	        },{
	            zooming: !1,
	            animating: !0,
	            bouncing: !1,
	            animationDuration: 1e3
	        })

        	scroller.setDimensions(750, _height, 750, 10000+_height);

	        $('.loveCanvas').on('touchstart', function(e){
	            e.stopPropagation(),
	            e.preventDefault(),
	            scroller.doTouchStart(e.touches, e.timeStamp);
	        }).on('touchmove', function(e){
	            e.stopPropagation(),
	            e.preventDefault(),
	            scroller.doTouchMove(e.touches, e.timeStamp, e.scale);
	        }).on('touchend', function(e){
	            scroller.doTouchEnd(e.timeStamp);
	        });
	    }

	    music_01.load();
	    music_02.load();
	    music_01.addEventListener('canplaythrough', function(){
	        m_cango = true;
	        if(p_cango){
	           $('.pressnum').text('100%');
        	   $('.press-press').css({width: '100%'});
        	   $('.start').show();
        	   startfalg = true;
	        }
	    })
	    // 阻止页面滑动
		;(function(){
			function isPassive() {
			    var supportsPassiveOption = false;
			    try {
			        addEventListener("test", null, Object.defineProperty({}, 'passive', {
			            get: function () {
			                supportsPassiveOption = true;
			            }
			        }));
			    } catch(e) {}
			    return supportsPassiveOption;
			}
			document.addEventListener('touchmove', function (e) { e.preventDefault(); }, isPassive() ? {
				capture: false,
				passive: false
			} : false);
		})()
	</script>
</body>
</html>